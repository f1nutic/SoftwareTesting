# Термины
**Git** - распределённая система управления версиями.  
**Репозиторий** - это директория с файлами, находящихся под контролем версий, вместе с историей их изменения.  
**Коммит** - это пакет изменений, хранящий информацию с добавленными, отредактированными или удалёнными файлами.  
**Ветка** — это набор коммитов, расположенных в хронологическом порядке.  
# Подготовка рабочего окружения
## Установка
[Официальный сайт для скачивания Git](https://git-scm.com/downloads)  
Проверить успех установки **Git** можно с помощью команды:  
```bash
git version
```
Если **Git** успешно установлен -> консоль выведет номер версии программы.  
### Windows
#### Powershell
Используя `winget tool` в Powershell для установки необходимо ввести:  
```powershell
winget install --id Git.Git -e --source winget
```
#### Автономный установщик
1. Необходимо [скачать](https://git-scm.com/download/windows) установщик в зависимости от разрядности системы
2. Запустить файл автономного установщика
3. Указать директорию для установки программы
4. Выбрать желаемые компоненты
5. Выбрать расположение ярлыков в пуск.
6. Выбрать желаемый текстовый редактор, который будет использовать Git
7. Выбрать название первой ветки в репозитории *(по умолчанию - master)*
8. Выбрать способ использования Git в разных оболочках и приложениях
9. Выбрать SSH-клиента в зависимости от задач
10. Выбрать SSL/TLS библиотеки в зависимости от требований
11. Выбрать метод перевода символов в строк *(для кросс-платформенности - вариант 1)*
12. Выбрать конфигурацию эмулятора терминала в зависимости от требований.
13. Выбрать стратегию команды `git pull` 
14. Выбрать возможность сохранения данных для подключения к удалённым репозиториям
15. Выбрать параметры дополнительных настроек кэширование или символических ссылок
16. Выбрать параметры экспериментальных настроек
17. Процесс установки
### Unix
Для установки необходимо ввести соответствующую команду для своего дистрибутива  
```bash
apt-get insatall git       # Debian/Ubuntu
dnf install git            # Fedora
pacman -S git              # Arch
zypper install git         # openSUSE
apk add git                # Alpine
pkg_add git                # OpenBSD
```
### macOS
По умолчанию с **macOS 10.9 (Mavericks) и выше** Git устанавливается при первой попытке запуска его из терминала.  
Возможна установка через `Homebrew` следующей командой:  
```bash
brew install git
```
## Первоначальная настройка Git
`git config --global user.name "Name"` - Указать имя пользователя `Name`  
`git config --global user.email "git@git.ru"` - Указать электронную почту `git@git.ru`  
  > [!WARNING]  
  > Электронная почта должна совпадать с той, на которую зарегистрирован аккаунт в Github.    

`git config --list` - Посмотреть настройки пользователя  

# Работа с репозиторием
## Создание репозитория
`git init` - Инициализация пустого локального репозитория в **текущей** директории  
`git init name-folder` - Инициализация пустого локального репозитория в **указанной** директории  
# Работа с изменениями
## Состояние
`git status` - Получения информации о текущем **состоянии** репозитория  
Основные флаги:  

|   Флаг   | Описание                                  |       Пример       |
|:--------:| ----------------------------------------- |:---------------------:|
|    -s    | Краткий формат о состоянии файлов         |    `git status -s`    |
|  --long  | Длинный формат о состоянии файлов         |  `git status --long`  |
| --branch | Информация о текущей ветке и её состоянии | `git status --branch` |

## Отслеживание
`git add .` - Начать отслеживание изменений **всей** директории  
`git add file1.md file2.txt` - Начать отслеживание файлов `file1.md`, `file2.txt`  
Основные флаги:  
 
| Флаг | Описание                                                                             |  Пример   |
|:----:| ------------------------------------------------------------------------------------ |:------------:|
|  -i  | Добавить измененное содержимое директории в интерактивном режиме                     | `git add -i` |
|  -p  | Отображение изменений в отслеживаемых файлах с последующим вопрос об индексированиий | `git add -p` |

## Сброс
`git reset` - Прекратить наблюдение **всех** отслеживаемых файлов (без изменений его содержимого)  
`git reset file1.md` - Прекратить наблюдение за **конкретным** файлом (без изменений его содержимого)  
## Коммит
`git commit` - Создание коммита с последующим введением комментария в текстовом редакторе  
Основные флаги:  

|   Флаг   | Описание                                                         |         Пример         |
|:--------:| ---------------------------------------------------------------- |:-------------------------:|
|    -a    | Создание коммита. Изменения/удаление файлов учитываются          |      `git commit -a`      | 
|    -p    | Создание коммита с отображением изменений в отслеживаемых файлах |      `git commit -p`      |
|    -m    | Создание коммита с комментарием                                  | `git commit -m "Example"` |

### Изменение
#### Крайний коммит
Если после крайнего коммита необходимо изменить его описание или добавить/удалить/изменить файлы:  
```bash
git commit --amend
```
В текстовом редакторе можно поменять описание коммита и посмотреть его изменения в его теле.  
#### Остальные коммиты
`git rebase -i` - интерактивный режим редактирования истории репозитория  
### Типы коммитов
Тип сообщает какое изменение производится.  

|    Тип     | Описание                                      |
|:----------:| --------------------------------------------- |
|   `fix`    | Устранение бага                               |
|   `feat`   | Новый функционал                              |
|  `chore`   | Обновление зависимостей                       |
| `refactor` | Рефакторинг кода                              |
|   `docs`   | Изменения в документация                      |
|  `style`   | Изменение в оформлении кода                   |
|   `test`   | Изменения тестовых файлов                     |
|   `perf`   | Улучшение производительности                  |
|    `ci`    | Изменения в интеграции CI в файлах и скриптах |
|  `build`   | Включение файлов сборки и зависимостей        |
|  `revert`  | Возвращение к прошлому коммиту                |

Пример:  
```bash
git commit -m "docs: Добавлен стек технологий в readme"
```  
## Ветка
`git branch newBranch` - **Создание** новой ветки с названием `newBranch`  
`git branch newBranch 1234ce` -  **Создание** новой ветку с названием `newBranch` на коммите `1234ce`  
`git branch -d 1234ce` - **Удаление** ветки с названием `1234ce`  
`git branch -D 1234ce` - Принудительное **удаление** ветки с названием `1234ce`  
`git checkout 1234ce` - **Переход** на ветку `1234ce`  

Основные флаги:  

| Флаг | Описание                             | Пример                |
| ---- | ------------------------------------ | ------------------------ |
| -d   | Удаление ветки с определенным именем | `git branch -d 1234ce`   |
| -D   | Принудительное удаление ветки        | `git branch -D 1234ce`   |
| -m   | Переименовать ветку                  | `git branch -m newName` |
| -a   | Показать все имеющийся ветки         | `git branch -a`          |

## Сравнение
`git diff` - Просмотр изменений между рабочим состоянием и крайним коммитом  
`git diff Text.md` - Просмотр изменений файла `Text` в сравнении с крайним коммитом  
`git diff -- . ':!Text.md'` - Просмотр изменений, **исключая** из сравнения файл `Text`  
`git diff HEAD` - Просмотр изменений между рабочим состоянием и головным коммитом  
`git diff first second` - Просмотр изменений между ветками `first` и `second`  
`git diff first second Text.md` - Сравнение файла `Text` между ветками `first` и `second`  
`git diff first...second` - Просмотр изменений ветки `first` после расхождения с веткой `second`  
## Слияние
`git merge second` - Выполнить слияние активной ветки и ветки `second`  
`git merge first second` - Выполнить слияние ветки `first` и ветки `second`  
## История
`git log` - Просмотр истории коммитов  
Основные флаги:  

| Флаг      | Описание                                                       | Пример                         |
| --------- | -------------------------------------------------------------- | ------------------------------ |
| -\[n\]    | Просмотр n крайних коммита в активной ветке                    | `git log -2`                   |
| --stat    | Просмотр истории с краткой статистикой изменений               | `git log --stat`               |
| --since   | Просмотр истории за определённый промежуток времени            | `git log --since=2.weeks`      |
| --after   | Просмотр истории после указанной даты                          | `git log --after '2020-02-20'` |
| --oneline | Просмотр истории, где описание каждого коммита занимает строку | `git log --oneline`            |
| --graph   | Просмотр истории в виде дерева                                 | `git log --graph`              |

*Выйти из просмотра длинной истории коммитов - `q`*  
# Работа с удалённым репозиторием
## Клонирование
`git clone https://github.com/example/ex.git`  -  Клонирование удаленного репозитория в **одноименную** директорию  
`git clone https://github.com/example/ex.git name-folder` - Клонирование удаленного репозитория в директорию `name-folder`  
`git clone https://github.com/example/ex.git .` - Клонирование удаленного репозитория в **текущую** директорию  
## Добавление
Для внесения изменений на удалённый репозиторий необходимо установить соединение  
```bash
git remote add name git@github.com:user/example.git
```
или  
```bash
git remote add name https://github.com/example/git-example
```
## Получение изменений 
Для получения изменений из удалённого репозитория:  
```bash
git fetch name
```
## Отправка изменений
Имея права на запись репозитория, отправка изменений осуществляется по имени репозитория и ветке:  
```bash
git push name master
```
## Просмотр
Просмотреть список настроенных удалённых репозиториев:  
```bash
git remote
```
Просмотреть подробную информацию об определённом репозитории:  
```bash
git remote show name
```
## Переименование
Чтобы переименовать удалённого репозитория `name` в `project`:  
```bash
git remote rename name project
```
## Удаление
Для удаления связи с удалённым репозиторием:  
```bash
git remote remove project
```
При удалении ссылки на удалённый репозиторий все отслеживаемые ветки и настройки, связанные с этим репозиторием, так же будут удалены.  

# Игнорирование файлов
**Игнорируемые файлы** - временные файлы из среды разработки, выходные данные тестирования и журналы, либо файлы, которые по какой-либо иной причине не должны попадать в коммиты.  
Игнорируемые файлы отслеживаются в специальном файле `.gitignore`, который регистрируется в корневом каталоге репозитория.  
Файлы `.gitignore` содержат шаблоны, которые сопоставляются с именами файлов в репозитории для определения необходимости игнорировать эти файлы.  
**Файл** `.gitignore` **создаётся самостоятельно!**  
**Пример:**  
```
# В этом файле можно оставлять комментарии
# Имя файла .gitignore
# Каждая строчка — это шаблон, по которому происходит игнорирование

# Игнорирование файла в любой директории репозитория
access.log

# Игнорирование всех файлов с расширением .log
*.log

# Игнорирование директории в любой директории репозитория
logs/

# Игнорирование директории в корне репозитория
/src/

# Игнорирование все файлов с расширением sqlite3 в директории db
# При этом не игнорируются такие же файлы внутри любого вложенного каталога в db
/db/*.sqlite3

# Игнорирование всех .txt файлы в каталоге doc/ на всех уровнях вложенности директорий
doc/**/*.txt


# Шаблоны подстановки
# Знак ? соответствует одному символу
file?.txt

# Квадратные скобки указывают соответствию одному символу из заданного диапазона
# Диапазон можно задать цифрами или буквами
file[0-9].txt
file[a-z].txt

# Квадратные скобки соответствуют одному символу из указанного набора
# В данном примере соотвествуют файлы --> file0.txt , file1.txt
file[01].txt
```
